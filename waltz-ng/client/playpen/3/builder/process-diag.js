const cells = {
    "DEVELOP_THE_VISION_AND_STRATEGY": {
        "id": "DEVELOP_THE_VISION_AND_STRATEGY",
        "name": "Develop the Vision and Strategy"
    },
    "PROVIDE_BUSINESS_ADVISORY": {
        "id": "PROVIDE_BUSINESS_ADVISORY",
        "name": "Provide Business Advisory"
    },
    "PROVIDE_ASSURANCE_OVER_OUR_CONTROL_ENVIRONMENT": {
        "id": "PROVIDE_ASSURANCE_OVER_OUR_CONTROL_ENVIRONMENT",
        "name": "Provide Assurance Over our Control Environment"
    },
    "DETECT_FINANCIAL_CRIME": {
        "id": "DETECT_FINANCIAL_CRIME",
        "name": "Detect Financial Crime"
    },
    "DELIVER_PRODUCTS_AND_SERVICES": {
        "id": "DELIVER_PRODUCTS_AND_SERVICES",
        "name": "Deliver Products and Services"
    },
    "MANAGE_RISK_FRAMEWORKS": {
        "id": "MANAGE_RISK_FRAMEWORKS",
        "name": "Manage Risk Frameworks"
    },
    "MANAGE_DATA_AND_INFORMATION_RECORDS": {
        "id": "MANAGE_DATA_AND_INFORMATION_RECORDS",
        "name": "Manage Data and Information Records"
    },
    "RUN_TECHNOLOGY": {
        "id": "RUN_TECHNOLOGY",
        "name": "Run Technology"
    },
    "ACCOUNT_FOR_COST_TRANSACTIONS": {
        "id": "ACCOUNT_FOR_COST_TRANSACTIONS",
        "name": "Account for Cost Transactions"
    },
    "DEVELOP_STRATEGIC_PLANS": {
        "id": "DEVELOP_STRATEGIC_PLANS",
        "name": "Develop Strategic Plans"
    },
    "PROVIDE_BUSINESS_APPROVALS": {
        "id": "PROVIDE_BUSINESS_APPROVALS",
        "name": "Provide Business Approvals"
    },
    "MANAGE_REGULATIONS_AND_OBLIGATIONS": {
        "id": "MANAGE_REGULATIONS_AND_OBLIGATIONS",
        "name": "Manage Regulations and Obligations"
    },
    "DETECT_BREACHES_OF_MARKET_AND_CLIENT_AND_EMPLOYEE_CONDUCT_RULES": {
        "id": "DETECT_BREACHES_OF_MARKET_AND_CLIENT_AND_EMPLOYEE_CONDUCT_RULES",
        "name": "Detect Breaches of Market and Client & Employee Conduct Rules"
    },
    "BILL_THE_CLIENT": {
        "id": "BILL_THE_CLIENT",
        "name": "Bill the Client"
    },
    "CALCULATE_RISK_MEASURES": {
        "id": "CALCULATE_RISK_MEASURES",
        "name": "Calculate Risk Measures"
    },
    "PROVIDE_LIQUIDITY_FUNDING_AND_CAPITAL": {
        "id": "PROVIDE_LIQUIDITY_FUNDING_AND_CAPITAL",
        "name": "Provide Liquidity, Funding and Capital"
    },
    "PLAN_AND_DIRECT_TECHNOLOGY": {
        "id": "PLAN_AND_DIRECT_TECHNOLOGY",
        "name": "Plan and Direct Technology"
    },
    "ACCOUNT_FOR_REVENUE_TRANSACTIONS": {
        "id": "ACCOUNT_FOR_REVENUE_TRANSACTIONS",
        "name": "Account for Revenue Transactions"
    },
    "REVIEW_BUSINESS_PERFORMANCE": {
        "id": "REVIEW_BUSINESS_PERFORMANCE",
        "name": "Review Business Performance"
    },
    "PROVIDE_ENTERPRISE_GOVERNANCE": {
        "id": "PROVIDE_ENTERPRISE_GOVERNANCE",
        "name": "Provide Enterprise Governance"
    },
    "OFF_BOARD_THE_CLIENT": {
        "id": "OFF_BOARD_THE_CLIENT",
        "name": "Off-board the Client"
    },
    "MONITOR_AND_CONTROL_RISK": {
        "id": "MONITOR_AND_CONTROL_RISK",
        "name": "Monitor & Control Risk"
    },
    "MANAGE_COMMUNICATIONS_AND_CORPORATE_SOCIAL_RESPONSIBILITY": {
        "id": "MANAGE_COMMUNICATIONS_AND_CORPORATE_SOCIAL_RESPONSIBILITY",
        "name": "Manage Communications and Corporate Social Responsibility"
    },
    "MONITOR_TECHNOLOGY": {
        "id": "MONITOR_TECHNOLOGY",
        "name": "Monitor Technology"
    },
    "PERFORM_FINANCIAL_CLOSE": {
        "id": "PERFORM_FINANCIAL_CLOSE",
        "name": "Perform Financial Close"
    },
    "OFFER_PRODUCTS_AND_SERVICES": {
        "id": "OFFER_PRODUCTS_AND_SERVICES",
        "name": "Offer Products and Services"
    },
    "REPORT_RISK": {
        "id": "REPORT_RISK",
        "name": "Report Risk"
    },
    "MANAGE_GLOBAL_REAL_ESTATE_SERVICES": {
        "id": "MANAGE_GLOBAL_REAL_ESTATE_SERVICES",
        "name": "Manage Global Real Estate Services"
    },
    "BUILD_TECHNOLOGY": {
        "id": "BUILD_TECHNOLOGY",
        "name": "Build Technology"
    },
    "PREPARE_FOR_ACCOUNTING": {
        "id": "PREPARE_FOR_ACCOUNTING",
        "name": "Prepare for Accounting"
    },
    "ONBOARD_THE_CLIENT": {
        "id": "ONBOARD_THE_CLIENT",
        "name": "Onboard the Client"
    },
    "PROVIDE_PRICING_AND_TRADING___RISK_AND_CAPITAL_MODELS": {
        "id": "PROVIDE_PRICING_AND_TRADING___RISK_AND_CAPITAL_MODELS",
        "name": "Provide Pricing & Trading / Risk & Capital Models"
    },
    "PROVIDE_EFFECTIVE_HUMAN_CAPITAL": {
        "id": "PROVIDE_EFFECTIVE_HUMAN_CAPITAL",
        "name": "Provide Effective Human Capital"
    },
    "REPORT_BUSINESS_RESULTS": {
        "id": "REPORT_BUSINESS_RESULTS",
        "name": "Report Business Results"
    },
    "SUPPORT_THE_DELIVERY_OF_PRODUCTS_AND_SERVICES": {
        "id": "SUPPORT_THE_DELIVERY_OF_PRODUCTS_AND_SERVICES",
        "name": "Support the Delivery of Products and Services"
    },
    "MANAGE_ACQUISITIONS_AND_DISPOSALS": {
        "id": "MANAGE_ACQUISITIONS_AND_DISPOSALS",
        "name": "Manage Acquisitions and Disposals"
    },
    "SUSTAIN_THE_CLIENT_RELATIONSHIP": {
        "id": "SUSTAIN_THE_CLIENT_RELATIONSHIP",
        "name": "Sustain the Client Relationship"
    },
    "MANAGE_CHANGE": {
        "id": "MANAGE_CHANGE",
        "name": "Manage Change"
    },
    "PROVIDE_INSURANCE_SERVICES": {
        "id": "PROVIDE_INSURANCE_SERVICES",
        "name": "Provide Insurance Services"
    },
    "PROCURE_GOODS_AND_SERVICES": {
        "id": "PROCURE_GOODS_AND_SERVICES",
        "name": "Procure Goods and Services"
    },
    "MANAGE_CORPORATE_SECURITY": {
        "id": "MANAGE_CORPORATE_SECURITY",
        "name": "Manage Corporate Security"
    },
    "MANAGE_INFORMATION_SECURITY": {
        "id": "MANAGE_INFORMATION_SECURITY",
        "name": "Manage Information Security"
    }
};


const deliverCells = {
    "PROVIDE_RESEARCH_SERVICES": {
        "id": "PROVIDE_RESEARCH_SERVICES",
        relevance: [],
        "name": "Provide Research Services "
    },
    "PROVIDE_OPERATIONS_SERVICES": {
        "id": "PROVIDE_OPERATIONS_SERVICES",
        relevance: [],
        "name": "Provide Operations Services "
    },
    "PROVIDE_FINANCING": {
        "id": "PROVIDE_FINANCING",
        relevance: [],
        "name": "Provide Financing "
    },
    "PERFORM_STRUCTURING": {
        "id": "PERFORM_STRUCTURING",
        relevance: [],
        "name": "Perform Structuring "
    },
    "PERFORM_MANDA": {
        "id": "PERFORM_MANDA",
        relevance: [],
        "name": "Perform M&A "
    },
    "PERFORM_SALES": {
        "id": "PERFORM_SALES",
        relevance: [],
        "name": "Perform Sales "
    },
    "PROVIDE_RETAIL_BANKING_SERVICES": {
        "id": "PROVIDE_RETAIL_BANKING_SERVICES",
        relevance: [],
        "name": "Provide Retail Banking Services "
    },
    "PROVIDE_FUNDS_SERVICES": {
        "id": "PROVIDE_FUNDS_SERVICES",
        relevance: [],
        "name": "Provide Funds Services "
    },
    "CLIENT_ADVISORY": {
        "id": "CLIENT_ADVISORY",
        relevance: [],
        "name": "Client Advisory "
    },
    "PERFORM_CUSTODY_SERVICES": {
        "id": "PERFORM_CUSTODY_SERVICES",
        relevance: [],
        "name": "Perform Custody Services "
    },
    "PORTFOLIO_MANAGEMENT": {
        "id": "PORTFOLIO_MANAGEMENT_",
        relevance: [],
        "name": "Portfolio Management "
    },
    "PROVIDE_TRADE_SOLUTION_SERVICES": {
        "id": "PROVIDE_TRADE_SOLUTION_SERVICES_",
        relevance: [],
        "name": "Provide Trade Solution Services "
    },
    "POSTAL_SERVICES": {
        "id": "POSTAL_SERVICES",
        relevance: [],
        "name": "Postal Services "
    }
}


function ns(namespace, cells) {
    return _.map(cells, c => ns1(namespace, c));
}


function ns1(namespace, cell) {
    return Object.assign({}, cell, {id: namespace + "_" + cell.id});
}

const sections = {
    "CREATE_THE_STRATEGY_AND_PLAN": {
        "id": "CREATE_THE_STRATEGY_AND_PLAN",
        "name": "Create the Strategy and Plan",
        rows: [
            [cells.DEVELOP_THE_VISION_AND_STRATEGY, cells.DEVELOP_STRATEGIC_PLANS]
        ]
    },
    "EVALUATE_AND_SUPPORT_BUSINESS_DECISIONS": {
        "id": "EVALUATE_AND_SUPPORT_BUSINESS_DECISIONS",
        "name": "Evaluate and Support business Decisions",
        rows: [
            [cells.PROVIDE_BUSINESS_ADVISORY, cells.PROVIDE_BUSINESS_APPROVALS, cells.REVIEW_BUSINESS_PERFORMANCE]
        ]
    },
    "PROVIDE_GOVERNANCE_AND_ASSURANCE": {
        "id": "PROVIDE_GOVERNANCE_AND_ASSURANCE",
        "name": "Provide Governance and Assurance",
        rows: [
            [
                cells.PROVIDE_ASSURANCE_OVER_OUR_CONTROL_ENVIRONMENT,
                cells.MANAGE_REGULATIONS_AND_OBLIGATIONS,
                cells.PROVIDE_ENTERPRISE_GOVERNANCE
            ]
        ]
    },
    "PERFORM_AND_MANAGE_DETECTION_AND_SURVEILLANCE": {
        "id": "PERFORM_AND_MANAGE_DETECTION_AND_SURVEILLANCE",
        "name": "Perform & Manage Detection & Surveillance",
        rows: [
            [
                cells.DETECT_FINANCIAL_CRIME,
                cells.DETECT_BREACHES_OF_MARKET_AND_CLIENT_AND_EMPLOYEE_CONDUCT_RULES
            ]
        ]
    },
    "CUSTOMER_JOURNEY": {
        "id": "CUSTOMER_JOURNEY",
        "name": "Customer Journey",
        rows: [
            [
                cells.BILL_THE_CLIENT,
                cells.OFF_BOARD_THE_CLIENT,
                cells.OFFER_PRODUCTS_AND_SERVICES
            ], [
                cells.ONBOARD_THE_CLIENT,
                cells.SUPPORT_THE_DELIVERY_OF_PRODUCTS_AND_SERVICES,
                cells.SUSTAIN_THE_CLIENT_RELATIONSHIP
            ]
        ]
    },
    "DELIVER_PRODUCTS_AND_SERVICES": {
        "id": "DELIVER_PRODUCTS_AND_SERVICES",
        "name": "Deliver Products and Services",
        "headerColor": "#a69124",
        "cellColor": "#f5e499",
        rows: [
            [
                deliverCells.PROVIDE_RESEARCH_SERVICES,
                deliverCells.PROVIDE_OPERATIONS_SERVICES,
                deliverCells.PROVIDE_FINANCING,
                deliverCells.PERFORM_STRUCTURING
            ], [
                deliverCells.PERFORM_MANDA,
                deliverCells.PERFORM_SALES,
                deliverCells.PROVIDE_RETAIL_BANKING_SERVICES,
            ], [
                deliverCells.PROVIDE_FUNDS_SERVICES,
                deliverCells.CLIENT_ADVISORY,
                deliverCells.PERFORM_CUSTODY_SERVICES,
            ], [
                deliverCells.PORTFOLIO_MANAGEMENT,
                deliverCells.PROVIDE_TRADE_SOLUTION_SERVICES,
                deliverCells.POSTAL_SERVICES
            ]
        ]
    },
    "MANAGE_RISK": {
        "id": "MANAGE_RISK",
        "name": "Manage Risk",
        rows: [
            [
                cells.MANAGE_RISK_FRAMEWORKS,
                cells.CALCULATE_RISK_MEASURES,
                cells.MONITOR_AND_CONTROL_RISK
            ], [
                cells.REPORT_RISK,
                cells.PROVIDE_PRICING_AND_TRADING___RISK_AND_CAPITAL_MODELS
            ]
        ]
    },
    "FACILITATE_DELIVERY": {
        "id": "FACILITATE_DELIVERY",
        "name": "Facilitate Delivery",
        rows: [
            [
                cells.MANAGE_DATA_AND_INFORMATION_RECORDS,
                cells.PROVIDE_LIQUIDITY_FUNDING_AND_CAPITAL,
                cells.MANAGE_COMMUNICATIONS_AND_CORPORATE_SOCIAL_RESPONSIBILITY,
                cells.MANAGE_GLOBAL_REAL_ESTATE_SERVICES
            ], [
                cells.PROVIDE_EFFECTIVE_HUMAN_CAPITAL,
                cells.MANAGE_ACQUISITIONS_AND_DISPOSALS,
                cells.MANAGE_CHANGE,
            ], [
                cells.PROVIDE_INSURANCE_SERVICES,
                cells.PROCURE_GOODS_AND_SERVICES,
                cells.MANAGE_CORPORATE_SECURITY,
                cells.MANAGE_INFORMATION_SECURITY
            ]
        ]
    },
    "MANAGE_TECHNOLOGY": {
        "id": "MANAGE_TECHNOLOGY",
        "name": "Manage Technology",
        rows: []
    },
    "ACCOUNT_AND_REPORT": {
        "id": "ACCOUNT_AND_REPORT",
        "name": "Account and Report",
        rows: []
    }
};


// function sanitize(x) { return _.toUpper(x).replaceAll(" ", "_").replaceAll(",", "_").replaceAll("/", "_").replaceAll("-","_").replaceAll("&", "AND"); }
// function toObjMap(xs) { return _.chain(xs).map(x => ({id: sanitize(x), name: x}) ).reduce((acc, d) => {acc[d.id] = d; return acc;}, {}).value(); }
// const epmToId = _.keyBy(epm, d => sanitize(d.name))
// _.chain(groups).flatMap(d => d.rows).flatten().map(d => Object.assign({}, d, {epmId: epmToId[d.id]?.id})).value()

export default _.values(sections);
